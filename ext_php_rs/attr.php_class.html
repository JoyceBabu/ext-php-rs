<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Annotates a struct that will be exported to PHP as a class."><meta name="keywords" content="rust, rustlang, rust-lang, php_class"><title>php_class in ext_php_rs - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings"></script><script src="../storage.js"></script><script src="../crates.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../favicon.svg">
<link rel="alternate icon" type="image/png" href="../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc attr"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../ext_php_rs/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><div class="sidebar-elems"><h2 class="location">Other items in<br><a href="index.html">ext_php_rs</a></h2><div id="sidebar-vars" data-name="php_class" data-ty="attr" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img src="../brush.svg" width="18" height="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img src="../wheel.svg" width="18" height="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Attribute Macro <a href="index.html">ext_php_rs</a>::<wbr><a class="attr" href="#">php_class</a><button id="copy-path" onclick="copy_path(this)" title="copy path"><img src="../clipboard.svg" width="19" height="18" alt="Copy item import" title="Copy item import to clipboard"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/ext_php_rs_derive/lib.rs.html#50" title="goto source code">[src]</a></span></h1><pre class="rust attr">#[php_class]</pre><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Annotates a struct that will be exported to PHP as a class.</p>
<p>The struct that this attribute is used on must implement <a href="https://doc.rust-lang.org/1.54.0/core/default/trait.Default.html" title="Default"><code>Default</code></a>, as this is used to
initialize the struct before the constructor is called. You may define a constructor with
the <a href="attr.php_impl.html" title="php_impl"><code>php_impl</code></a> macro which can modify the properties of the struct.</p>
<p>This attribute takes a set of optional arguments:</p>
<ul>
<li><code>name</code> - The name of the exported class, if it is different from the Rust struct name. This
can be useful for namespaced classes, as you cannot place backslashes in Rust struct names.</li>
</ul>
<p>Any struct that uses this attribute can also provide an optional set of extra attributes, used
to modify the class. These attributes must be used <strong>underneath</strong> this attribute, as they are
not valid Rust attributes, and instead are parsed by this attribute:</p>
<ul>
<li><code>#[extends(ce)]</code> - Sets the parent class of this new class. Can only be used once, and <code>ce</code>
may be any valid expression.</li>
<li><code>#[implements(ce)]</code> - Implements an interface on the new class. Can be used multiple times,
and <code>ce</code> may be any valid expression.</li>
</ul>
<p>This attribute (and its associated structs) must be defined <em>above</em> the startup function (which
is annotated by the <a href="attr.php_startup.html" title="php_startup"><code>php_startup</code></a> macro, or automatically generated just above the
<a href="attr.php_module.html" title="php_module"><code>php_module</code></a> function).</p>
<p>Fields defined on the struct <em>are not</em> the same as PHP properties, and are only accessible from
Rust.</p>
<h1 id="example" class="section-header"><a href="#example">Example</a></h1>
<p>Export a simple class called <code>Example</code>, with 3 Rust fields.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="attribute">#[<span class="ident">php_class</span>]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Default</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Example</span> {
    <span class="ident">x</span>: <span class="ident">i32</span>,
    <span class="ident">y</span>: <span class="ident">String</span>,
    <span class="ident">z</span>: <span class="ident">bool</span>
}

<span class="attribute">#[<span class="ident">php_module</span>]</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">module</span>(<span class="ident">module</span>: <span class="ident">ModuleBuilder</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">ModuleBuilder</span> {
    <span class="ident">module</span>
}</pre></div>
<p>Create a custom exception <code>RedisException</code> inside the namespace <code>Redis\Exception</code>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">ext_php_rs::php::exceptions::PhpException</span>;
<span class="kw">use</span> <span class="ident">ext_php_rs::php::class::ClassEntry</span>;

<span class="attribute">#[<span class="ident">php_class</span>(<span class="ident">name</span> <span class="op">=</span> <span class="string">&quot;Redis\\Exception\\RedisException&quot;</span>)]</span>
<span class="attribute">#[<span class="ident">extends</span>(<span class="ident">ClassEntry::exception</span>())]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Default</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Example</span>;

<span class="attribute">#[<span class="ident">php_function</span>]</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">throw_exception</span>() <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">i32</span>, <span class="ident">PhpException</span><span class="op">&lt;</span><span class="lifetime">&#39;static</span><span class="op">&gt;</span><span class="op">&gt;</span> {
    <span class="prelude-val">Err</span>(<span class="ident">PhpException::from_class</span>::<span class="op">&lt;</span><span class="ident">Example</span><span class="op">&gt;</span>(<span class="string">&quot;Bad things happen&quot;</span>.<span class="ident">into</span>()))
}

<span class="attribute">#[<span class="ident">php_module</span>]</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">module</span>(<span class="ident">module</span>: <span class="ident">ModuleBuilder</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">ModuleBuilder</span> {
    <span class="ident">module</span>
}</pre></div>
</div></details></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="ext_php_rs" data-search-index-js="../search-index.js" data-search-js="../search.js"></div><script src="../main.js"></script></body></html>